<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>All Politics News | E TIMES INDIA * 24</title>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
      rel="stylesheet"
    />
    <link rel="shortcut icon" href="/logo/logo2.png" type="image/x-icon">
    <link
      href="https://fonts.googleapis.com/css2?family=Antonio:wght@700&family=Roboto:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      body {
        font-family: "Roboto", sans-serif;
        background: #fff;
        color: #222;
        min-height: 100vh;
        position: relative;
        overflow-x: hidden;
        line-height: 1.5;
      }

      /* Animated Background */
      .bg-spots {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: radial-gradient(
            circle at 20% 30%,
            #ff1a1a 0%,
            transparent 30%
          ),
          radial-gradient(circle at 80% 70%, #c80000 0%, transparent 35%),
          radial-gradient(circle at 50% 10%, #ff4d4d 0%, transparent 28%),
          radial-gradient(circle at 10% 80%, #ff3333 0%, transparent 32%),
          radial-gradient(circle at 90% 20%, #e60000 0%, transparent 30%);
        background-size: 600px 600px, 700px 700px, 500px 500px, 650px 650px,
          550px 550px;
        background-position: 0 0, 100px 200px, -50px -100px, 300px 400px,
          -200px 100px;
        opacity: 0.12;
        animation: floatSpots 45s ease-in-out infinite alternate;
        z-index: -1;
        pointer-events: none;
      }
      @keyframes floatSpots {
        0% {
          background-position: 0 0, 100px 200px, -50px -100px, 300px 400px,
            -200px 100px;
        }
        100% {
          background-position: 50px 50px, 150px 250px, 0 -50px, 350px 450px,
            -150px 150px;
        }
      }

      /* Header */
      header {
        background: #fff;
        padding: 12px 20px;
        position: sticky;
        top: 0;
        z-index: 1000;
        box-shadow: 0 4px 25px rgba(200, 0, 0, 0.15);
        border-bottom: 3px solid #c80000;
      }
      .top-bar {
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: 15px;
        max-width: 1600px;
        margin: 0 auto;
      }
      .logo {
        height: 65px;
      }
      .logo-img{
        height:45px;
        width:auto;
      }
      .menu-toggle {
        display: none;
        cursor: pointer;
        font-size: 24px;
        color: #c80000;
        padding: 5px;
      }
      nav ul {
        display: flex;
        gap: 20px;
        list-style: none;
        flex-wrap: wrap;
        justify-content: center;
      }
      nav a {
        color: #c80000;
        text-decoration: none;
        font-weight: 700;
        font-size: 14px;
        text-transform: uppercase;
        padding: 8px 0;
        position: relative;
        transition: 0.3s;
      }
      nav a::after {
        content: "";
        position: absolute;
        bottom: 0;
        left: 0;
        width: 0;
        height: 2px;
        background: #c80000;
        transition: 0.3s;
      }
      nav a:hover::after {
        width: 100%;
      }

      /* Ticker */
      .ticker {
        background: #c80000;
        color: #fff;
        padding: 10px 0;
        font-weight: 700;
        overflow: hidden;
        white-space: nowrap;
      }
      .ticker span {
        display: inline-block;
        animation: scrollLeft 100s linear infinite;
        padding-left: 100%;
        font-size: 15px;
      }
      @keyframes scrollLeft {
        0% {
          transform: translateX(0);
        }
        100% {
          transform: translateX(-100%);
        }
      }

      /* Live Info */
      .live-info {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 8px 20px;
        background: #111;
        color: #fff;
        font-size: 14px;
        flex-wrap: wrap;
        gap: 10px;
      }

      /* Container */
      .container {
        max-width: 1600px;
        margin: 20px auto;
        padding: 0 15px;
        display: grid;
        grid-template-columns: 280px 1fr 320px;
        gap: 20px;
      }

      /* Sidebar Toggle (Mobile) */
      .sidebar-toggle {
        position: fixed;
        left: 15px;
        top: 120px;
        background: #c80000;
        color: #fff;
        width: 50px;
        height: 50px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 22px;
        cursor: pointer;
        z-index: 999;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
        display: none;
      }

      /* Live Video */
      .live-video {
        position: relative;
        margin-bottom: 25px;
        border-radius: 16px;
        overflow: hidden;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
      }
      .live-badge {
        position: absolute;
        top: 15px;
        left: 15px;
        background: #c80000;
        color: #fff;
        padding: 10px 25px;
        border-radius: 50px;
        font-weight: bold;
        font-size: 16px;
        animation: flash 1.5s infinite;
        z-index: 10;
        box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
      }
      @keyframes flash {
        0%,
        100% {
          background: #c80000;
        }
        50% {
          background: #ff1a1a;
        }
      }
      .live-video video {
        width: 100%;
        height: 480px;
        object-fit: cover;
        display: block;
      }
      .live-video h2 {
        background: #ffffff;
        color: #ff0000;
        padding: 16px;
        text-align: center;
        font-size: 19px;
        margin: 0;
      }

      /* Cards & Grids */
      .news-grid {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 18px;
      }
      .news-card {
        background: #fff;
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
        transition: transform 0.3s;
      }
      .news-card:hover {
        transform: translateY(-8px);
      }
      .news-card img {
        width: 100%;
        height: 180px;
        object-fit: cover;
      }
      .news-card h3 {
        font-size: 16px;
        margin: 12px 14px 8px;
        line-height: 1.3;
      }
      .news-card p {
        font-size: 13px;
        color: #555;
        margin: 0 14px 14px;
      }
      .news-card .date {
        font-size: 12px;
        color: #c80000;
        margin: 0 14px 10px;
        font-weight: bold;
      }

      /* Section Headers */
      .section-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin: 30px 0 15px;
        padding: 0 5px;
      }
      .section-header h2 {
        font-size: 22px;
        color: #c80000;
        font-weight: 700;
        position: relative;
        padding-left: 18px;
      }
      .section-header h2::before {
        content: "";
        position: absolute;
        left: 0;
        top: 50%;
        transform: translateY(-50%);
        width: 6px;
        height: 28px;
        background: #c80000;
        border-radius: 3px;
      }

      /* Mandi & Categories */
      .categories {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 12px;
        margin-bottom: 25px;
      }
      .cat-item {
        background: #f8f8f8;
        padding: 16px 10px;
        text-align: center;
        border-radius: 12px;
        font-weight: bold;
        color: #c80000;
        transition: 0.3s;
        font-size: 14px;
      }
      .cat-item:hover {
        background: #c80000;
        color: #fff;
      }

      .mandi-section {
        background: linear-gradient(135deg, #c80000, #ff1a1a);
        color: #fff;
        padding: 20px;
        border-radius: 16px;
        margin: 0px 0;
      }
      .mandi-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
        gap: 16px;
      }
      .mandi-table {
        width: 100%;
        border-collapse: collapse;
        color: #fff;
      }
      .mandi-table td {
        padding: 4px 0;
        border-bottom: 1px solid rgba(255, 255, 255, 0.2);
      }
      .mandi-table td:first-child {
        text-align: left;
        padding-right: 10px;
      }
      .mandi-table td:last-child {
        text-align: center;
        font-weight: bold;
      }

      /* Ads */
      .ad-banner {
        background: #f0f0f0;
        border: 3px dashed #c80000;
        color: #c80000;
        text-align: center;
        padding: 30px 10px;
        border-radius: 12px;
        font-weight: bold;
        margin: 20px 0;
      }

      /* Footer */
      footer {
        background: #111;
        color: #ccc;
        padding: 60px 20px 40px;
        margin-top: 80px;
      }
      .footer-grid {
        max-width: 1400px;
        margin: auto;
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 40px;
      }
      .footer-col h3 {
        color: #c80000;
        margin-bottom: 10px;
      }

      /* Loader */
      .loader {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: #fff;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        transition: opacity 0.5s;
      }
      .loader .spinner {
        width: 80px;
        height: 80px;
        border: 8px solid #f3f3f3;
        border-top: 8px solid #c80000;
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }
      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }

      /* RESPONSIVE DESIGN */
      @media (max-width: 1200px) {
        .container {
          grid-template-columns: 1fr 1fr;
        }
        .right-sidebar {
          grid-column: 1 / -1;
        }
        .news-grid {
          grid-template-columns: repeat(3, 1fr);
        }
      }

      @media (max-width: 992px) {
        .container {
          grid-template-columns: 1fr;
          padding: 0 15px;
        }
        .left-sidebar {
          position: fixed;
          left: -353px;
          top: 0;
          height: 100vh;
          width: 323px;
          background: #fff;
          z-index: 998;
          padding: 90px 20px 20px;
          overflow-y: auto;
          box-shadow: 5px 0 20px rgba(0, 0, 0, 0.3);
          transition: left 0.4s ease;
        }
        .left-sidebar.open {
          left: 0;
        }
        .sidebar-toggle {
          display: none;
        }
        .menu-toggle {
          display: flex;
        }
        .top-bar {
          flex-direction: row;
          justify-content: space-between;
          align-items: center;
          gap: 0;
        }
        .logo {
          height: 50px;
          flex-shrink: 0;
        }
        nav ul {
          display: none;
        }
        .live-video video {
          height: 350px;
        }
        .news-grid {
          grid-template-columns: 1fr 1fr;
        }
        nav ul {
          gap: 14px;
          font-size: 13px;
        }
      }

      @media (max-width: 768px) {
        .top-bar {
          justify-content: space-between;
        }
        .logo {
          height: 45px;
        }
        .live-video video {
          height: 280px;
        }
        .news-grid {
          grid-template-columns: 1fr;
        }
        .categories {
          grid-template-columns: 1fr 1fr;
        }
        .ticker span {
          font-size: 14px;
        }
        .live-info {
          padding: 6px 15px;
        }
      }

      @media (max-width: 480px) {
        .live-info {
          font-size: 12px;
          padding: 8px 12px;
          text-align: center;
          flex-direction: row;
          gap: 5px;
        }
        .section-header h2 {
          font-size: 19px;
        }
        .live-badge {
          font-size: 14px;
          padding: 8px 18px;
        }
        .categories {
          grid-template-columns: 1fr;
        }
        .mandi-grid {
          grid-template-columns: 1fr;
        }
        .ad-banner {
          font-size: 14px;
          padding: 20px 10px;
        }
        header {
          padding: 8px 15px;
        }
        .top-bar {
          padding: 0;
        }
        .logo {
          height: 40px;
        }
        .menu-toggle {
          font-size: 20px;
        }
      }
      /* NEWS CHANNEL STYLE FIXED CATEGORY BUTTONS */
      .categories-buttons-bar {
        background: linear-gradient(to bottom, #c80000, #a00000);
        padding: 7px 0;
        overflow-x: auto;
        white-space: nowrap;
        scrollbar-width: none;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
        border-bottom: 3px solid #ff1744;
      }

      .categories-buttons-bar::-webkit-scrollbar {
        display: none;
      }

      .cat-btn {
        display: inline-block;
        align-items: center;
        background: rgb(255, 255, 255);
        color: rgb(255, 0, 0);
        padding: 7px 12px;
        margin: 0 8px;
        border-radius: 10px;
        font-weight: 800;
        font-size: 16px;
        text-transform: uppercase;
        letter-spacing: 1px;
        transition: all 0.3s ease;
        backdrop-filter: blur(8px);
        border: 2px solid transparent;
        cursor: pointer;
      }

      .cat-btn:hover {
        background: #ff1744;
        color: #ffffff;
        border: 2px solid #fff;
        transform: translateY(-3px);
        box-shadow: 0 8px 20px rgba(255, 23, 68, 0.6);
      }

      .cat-btn.active {
        background: #ff0000;
        color: #ffffff;
        border: 2px solid #fff;
        box-shadow: 0 0 20px rgba(255, 255, 255, 0.6);
      }
      .logo-img{
      height:45px;
      width:auto;
      }
      @media (max-width: 600px) {
        .cat-btn {
          font-size: 12px;
          padding: 3px 6px;
          margin: 0px;
        }

        .logo-img{
height:30px;
width:auto;
        }
      }
      .close-sidebar {
        font-size:28px;
    background:none;
    border:none;
    float:right;
    cursor:pointer;
    background-color: #a00000;
    border-radius: 10px;
    padding: 10px;
    color:#ffffff;
    font-weight:bold;
    margin-bottom:10px;
      }

      @media  ( min-width: 600px) {
        .close-sidebar {
          font-size: 28px;
    background: none;
    border: none;
    float: right;
    cursor: pointer;
    background-color: #a0000013;
    border-radius: 10px;
    padding: 10px;
    color: #ffffff00;
    font-weight: bold;
    margin-bottom: 10px;
        }
      }

      /* Category All News Specific Styles */
      .category-hero {
        background: linear-gradient(135deg, #c80000, #ff1a1a);
        color: #fff;
        padding: 40px 20px;
        text-align: center;
        margin-bottom: 30px;
      }
      .category-hero h1 {
        font-size: 36px;
        margin-bottom: 10px;
      }
      .category-hero p {
        font-size: 18px;
        opacity: 0.9;
      }
      .pagination {
        display: flex;
        justify-content: center;
        gap: 10px;
        margin: 40px 0;
      }
      .pagination a, .pagination span {
        padding: 10px 15px;
        background: #f8f8f8;
        color: #c80000;
        text-decoration: none;
        border-radius: 5px;
        transition: background 0.3s;
      }
      .pagination a:hover {
        background: #c80000;
        color: #fff;
      }
      .pagination .current {
        background: #c80000;
        color: #fff;
      }
    </style>
  </head>
  <body>
    <div class="bg-spots"></div>

    <div class="loader" id="loader">
      <div class="spinner"></div>
      <p>Loading All Politics News | E TIMES INDIA * 24...</p>
    </div>

   <%- include("layout/header") %>

    <div class="live-info">
      <div class="time" id="liveTime"></div>
      <div class="weather" id="weatherDisplay">
        <i class="fas fa-spinner fa-spin"></i> Detecting your location &
        weather...
      </div>
    </div>

    <!-- Categories Buttons Bar -->
    <div class="categories-buttons-bar">
     
    
    <%- include("layout/buttons") %>
  </div>

    <div class="container">
      <aside class="left-sidebar">
        <button 
    class="close-sidebar" 
    onclick="closeSidebar()" 
    style=""
  >
    ×
  </button>

        <script>
    function closeSidebar() {
      document.querySelector('.left-sidebar').classList.remove('open');
    }

    function openSidebar() {
      document.querySelector('.left-sidebar').classList.add('open');
    }

    // When clicking Mandi Rates button
    document.querySelector('.menu-toggle')
      .addEventListener('click', openSidebar);
  </script>

          <div class="mandi-section">
            <h2>Mandi Rates Today</h2>
            <div class="mandi-grid">
              <div class="mandi-city">
                <h3>Delhi</h3>
                <table class="mandi-table">
                  <tr>
                    <td>Wheat</td>
                    <td>₹2,450/Qtl</td>
                  </tr>
                  <tr>
                    <td>Rice</td>
                    <td>₹3,800</td>
                  </tr>
                  <tr>
                    <td>Maize</td>
                    <td>₹1,950</td>
                  </tr>
                </table>
              </div>
              <div class="mandi-city">
                <h3>Mumbai</h3>
                <table class="mandi-table">
                  <tr>
                    <td>Tomato</td>
                    <td>₹2,500</td>
                  </tr>
                  <tr>
                    <td>Onion</td>
                    <td>₹1,800</td>
                  </tr>
                  <tr>
                    <td>Potato</td>
                    <td>₹1,200</td>
                  </tr>
                </table>
              </div>
              <div class="mandi-city">
                <h3>Kolkata</h3>
                <table class="mandi-table">
                  <tr>
                    <td>Paddy</td>
                    <td>₹2,100</td>
                  </tr>
                  <tr>
                    <td>Sugarcane</td>
                    <td>₹3,200</td>
                  </tr>
                  <tr>
                    <td>Chilli</td>
                    <td>₹4,500</td>
                  </tr>
                </table>
              </div>
            </div>
          </div>
          
        <div class="left-ad-section" style="width:300px; margin-top: 20px;">

  <% if (leftads && leftads.length > 0) { %>

      <% leftads.forEach(ad => { %>

        <div class="left-ad-box" style="margin-bottom:20px; width:300px;">

          <% if (ad.mediaType === "image") { %>

            <a href="<%= ad.link || '#' %>" target="_blank">
              <img 
                src="<%= ad.mediaUrl %>" 
                alt="<%= ad.title %>"
                style="width:310px; height:auto; display:block; object-fit:contain; border:1px solid #ccc; border-radius:4px;"
              >
            </a>

          <% } else if (ad.mediaType === "video") { %>

            <video 
              style="width:310px; height:auto; display:block; border:1px solid #ccc; border-radius:4px;" 
              autoplay 
              muted 
              loop 
              
            >
              <source src="<%= ad.mediaUrl %>" type="video/mp4">
            </video>

          <% } %>

        </div>

      <% }) %>

  <% } else { %>

      <!-- Default Banner -->
      <div 
        style="
          width:300px;
          height:auto;
          padding:20px 0;
          text-align:center;
          background:#f2f2f2;
          border:1px solid #ccc;
          font-size:18px;
          font-weight:bold;
        "
      >
        ADVERTISEMENT <br> 300 × 250
      </div>

  <% } %>

</div>
      </aside>

    <main>
    <!-- Category Hero -->
   <!-- HERO -->
  <section style="background:linear-gradient(135deg,#a00000,#d41414);color:#fff;text-align:center;padding:70px 20px;">
    <h1 style="margin:0;font-size:2.9rem;font-weight:800;">
      <%= title.charAt(0).toUpperCase() + title.slice(1).toLowerCase() %> News
    </h1>
    <p style="font-size:1.22rem;margin:15px 0 0;opacity:0.94;">
      Latest breaking stories, updates & analysis from India
    </p>
  </section>

  <!-- AD -->
  <div style="text-align:center;margin:30px 0;">
    <img src="/logo/logo.png" style="width:100%;max-width:900px;border-radius:8px;" loading="lazy">
  </div>

  <!-- HEADER -->
  <div style="display:flex;justify-content:space-between;align-items:center;
       background:#a00000;color:#fff;padding:16px 25px;margin:20px 15px 15px;border-radius:12px;">
    <h2 style="margin:0;font-size:1.75rem;">All <%= title.charAt(0).toUpperCase() + title.slice(1) %> Stories</h2>
    <a href="/" style="color:#fff;text-decoration:none;font-weight:600;">Back to Home</a>
  </div>

  <!-- GRID: 3 Cards Per Row -->
  <div id="newsContainer" style="display:flex;flex-wrap:wrap;justify-content:center;gap:28px;padding:0 15px;max-width:1500px;margin:0 auto;">
    
    <!-- First page (24 cards) already rendered by server -->
    <% news.forEach(function(item) { %>
      <a href="/<%= title %>/<%= item._id %>" style="text-decoration:none;color:#222;display:block;">
        <div style="background:#fff;border-radius:12px;overflow:hidden;
                    box-shadow:0 2px 16px #a000003a;border-left:7px solid #a00000;
                    max-width:380px;width:100%;transition:all 0.3s;">
          
          <% if(item.mediaType === 'video' && item.video) { %>
            <video controls poster="<%= item.image || '/logo/logo.png' %>"
                   style="width:100%;height:190px;object-fit:cover;">
              <source src="<%= item.video %>" type="video/mp4">
            </video>
          <% } else { %>
            <img src="<%= item.image || `https://picsum.photos/seed/${item._id}/400/250` %>"
                 alt="<%= item.headline %>" loading="lazy"
                 style="width:100%;height:190px;object-fit:cover;">
          <% } %>

          <div style="padding:16px;">
            <div style="color:#a00000;font-size:12px;font-weight:600;margin-bottom:8px;">
              <%= new Date(item.createdAt).toLocaleDateString("en-IN", {day:"numeric", month:"short", year:"numeric"}) %>
            </div>
            <h3 style="margin:0 0 10px;font-size:1.18rem;font-weight:700;line-height:1.3;">
              <%= item.headline %>
            </h3>
            <p style="margin:0 0 12px;font-size:0.98rem;color:#444;line-height:1.5;">
              <%= item.description.substring(0,140) %>...
            </p>
            <% if(item.location) { %>
              <p style="margin:0;font-size:13px;color:#c80000;font-weight:600;">
                <%= item.location %>
              </p>
            <% } %>
            <% if(item.externalLink) { %>
              <p style="margin:10px 0 0;">
                <a href="<%= item.externalLink %>" target="_blank"
                   style="color:#a00000;font-weight:600;text-decoration:none;">
                  Read Full Story
                </a>
              </p>
            <% } %>
          </div>
        </div>
      </a>
    <% }); %>
  </div>

  <!-- Loading & End Message -->
  <div id="loading" style="text-align:center;padding:50px;font-size:1.3rem;color:#a00000;display:none;">
    Loading more stories...
  </div>
  <div id="noMore" style="text-align:center;padding:50px;color:#666;display:none;">
    You've reached the end!
  </div>

  <!-- AJAX Lazy Load Script -->
  <script>
    let currentPage = 2; // First page already loaded
    let loading = false;
    const category = "<%= title %>";
    const totalPages = <%= pageCount %>;

    async function loadMore() {
      if (loading || currentPage > totalPages) return;
      loading = true;
      document.getElementById('loading').style.display = 'block';

      try {
        const res = await fetch(`/${category}?page=${currentPage}&ajax=1`);
        const html = await res.text();

        if (html.trim() === '' || currentPage > totalPages) {
          document.getElementById('noMore').style.display = 'block';
          document.getElementById('loading').style.display = 'none';
          return;
        }

        const parser = new DOMParser();
        const doc = parser.parseFromString(html, 'text/html');
        const newCards = doc.querySelectorAll('#newsContainer > a');

        const container = document.getElementById('newsContainer');
        newCards.forEach(card => {
          const wrapper = document.createElement('div');
          wrapper.style.opacity = '0';
          wrapper.style.transform = 'translateY(30px)';
          wrapper.style.transition = 'all 0.6s ease';
          wrapper.innerHTML = card.outerHTML;
          container.appendChild(wrapper.firstChild);

          setTimeout(() => {
            wrapper.firstChild.style.opacity = '1';
            wrapper.firstChild.style.transform = 'translateY(0)';
          }, 100);
        });

        currentPage++;
      } catch (err) {
        console.error(err);
      } finally {
        loading = false;
        document.getElementById('loading').style.display = 'none';
      }
    }

    // Trigger on scroll
    window.addEventListener('scroll', () => {
      if (window.innerHeight + window.scrollY >= document.body.offsetHeight - 1000) {
        loadMore();
      }
    });
  </script>
    <!-- AD BLOCK -->
    <div style="width: 100%; margin: 20px 0; text-align: center">
      <img src="/logo/logo.png" style="width: 100%; max-width: 900px; border-radius: 6px" />
    </div>
  </main>

      <aside class="right-sidebar">

  <!-- Trending Header -->
  <h2 style="background:#c80000;color:#fff;padding:18px;text-align:center;border-radius:12px 12px 0 0;margin:0;font-size:20px;font-weight:700;">
    Trending Politics
  </h2>

  <!-- Dynamic Trending List -->
  <div style="background:#fff;border-radius:0 0 12px 12px;overflow:hidden;box-shadow:0 6px 20px rgba(0,0,0,0.1);">
    
    <% 
      // Use: latestPolitics, trendingNews, or any array you pass from controller
      const trendingList = news || trendingNews || []; 
      trendingList.slice(0, 10).forEach((item, index) => { 
    %>
      <a href="/<%= title %>/<%= item._id %>" 
         style="text-decoration:none;color:#222;display:block;transition:all 0.3s;">
        
        <div style="display:flex;gap:14px;align-items:center;padding:14px;
                    border-bottom:1px solid #f0f0f0;transition:all 0.3s;">
          
          <!-- Rank Number -->
          <div style="background:#c80000;color:#fff;width:34px;height:34px;border-radius:50%;
                      display:flex;align-items:center;justify-content:center;font-weight:bold;
                      font-size:15px;flex-shrink:0;">
            <%= index + 1 %>
          </div>

          <!-- Thumbnail (Photo or Video) -->
        <!-- THUMBNAIL - VIDEO OR IMAGE + VIDEO TAG ALWAYS ON VIDEOS -->
<div style="flex-shrink:0; position:relative; width:90px; height:60px; border-radius:8px; overflow:hidden; background:#000;">
  
  <% if (item.mediaType === 'video') { %>
    <!-- VIDEO CARD - WITH VIDEO TAG -->
   <video 
    src="<%= item.video || '/videos/default.mp4' %>" 
    poster="<%= item.image || '/logo/video-thumb.jpg' || 'https://picsum.photos/seed/v' + item._id + '/400/250' %>" 
    alt="<%= item.headline %>" 
    style="width:100%; height:100%; object-fit:cover; opacity:0.85;"
    preload="none"
    playsinline
    controls>
</video>

      <video src="<%= item.image || '/logo/video-thumb.jpg' || 'https://picsum.photos/seed/v'+item._id+'/400/250' %>"></video>
    
    <!-- PLAY ICON -->
    <div style="position:absolute; inset:0; display:flex; align-items:center; justify-content:center;">
      <i class="fas fa-play-circle" style="color:#fff; font-size:34px; opacity:0.95;"></i>
    </div>
    
    <!-- RED "VIDEO" TAG - ALWAYS VISIBLE -->
    <div style="position:absolute; top:4px; left:4px; background:#c80000; color:#fff; 
                padding:3px 8px; border-radius:4px; font-size:10px; font-weight:900; 
                letter-spacing:0.5px; box-shadow:0 2px 8px rgba(0,0,0,0.4);">
      VIDEO
    </div>

  <% } else { %>
    <!-- NORMAL IMAGE CARD -->
    <img 
      src="<%= item.image || 'https://picsum.photos/seed/'+item._id+'/400/250' %>" 
      alt="<%= item.headline %>" 
      loading="lazy"
      style="width:100%; height:100%; object-fit:cover;">
  <% } %>

</div>

          <!-- Text -->
          <div style="flex-grow:1;">
            <h4 style="margin:0 0 4px;font-size:14.5px;font-weight:700;line-height:1.3;color:#c80000;">
              <%= item.headline.length > 58 ? item.headline.substring(0,55)+'...' : item.headline %>
            </h4>
            <small style="color:#666;font-size:12px;display:block;">
              <%= item.description ? item.description.substring(0,65)+(item.description.length>65?'...':'') : 'Click to read' %>
            </small>
          </div>
        </div>

        <!-- Hover Effect -->
        <style>
          a:hover > div {
            background:#fff8f8 !important;
            transform:translateX(6px);
            padding-left:18px !important;
          }
        </style>
      </a>
    <% }) %>

    <!-- Fallback if no news -->
    <% if (!trendingList || trendingList.length === 0) { %>
      <div style="padding:30px;text-align:center;color:#999;font-style:italic;">
        No trending politics news right now
      </div>
    <% } %>
  </div>

  <!-- Ad -->
     <div class="right-ads" style="margin-top: 20; padding: 0;">
  <% if (rightads && rightads.length > 0) { %>

    <% rightads.forEach(ad => { %>

      <div class="ad-box" style="margin-bottom:20px;">

        <% if (ad.mediaType === "image") { %>
            <a href="<%= ad.link || '#' %>" target="_blank">
              <img 
                src="<%= ad.mediaUrl %>" 
                alt="<%= ad.title %>" 
                style="width:350px; height:auto; display:block; object-fit:contain;"
              >
            </a>

        <% } else if (ad.mediaType === "video") { %>
            <video 
              style="width:350px; height:auto; display:block;" 
              autoplay 
              muted 
              loop 
             
            >
              <source src="<%= ad.mediaUrl %>" type="video/mp4">
            </video>
        <% } %>

      </div>

    <% }) %>

  <% } else { %>
      <div class="ad-banner">ADVERTISEMENT<br>300x600</div>
  <% } %>
</div>
</aside>
    </div>

       <%- include("layout/footer") %>




    <script>
      // Live Time
      function updateTime() {
        const now = new Date();
        const options = {
          timeZone: "Asia/Kolkata",
          hour12: true,
          hour: "2-digit",
          minute: "2-digit",
          second: "2-digit",
        };
        document.getElementById("liveTime").innerText =
          now.toLocaleString("en-US", options) + " IST";
      }
      setInterval(updateTime, 1000);
      updateTime();
      // === AUTO DETECT LOCATION + WEATHER (Free & No API Key) ===
      function getWeather() {
        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(
            async (pos) => {
              const lat = pos.coords.latitude;
              const lon = pos.coords.longitude;

              try {
                const res = await fetch(
                  `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current=temperature_2m,weathercode&timezone=Asia/Kolkata`
                );
                const data = await res.json();
                const temp = Math.round(data.current.temperature_2m);
                const code = data.current.weathercode;

                // Simple weather description
                const weatherDesc = {
                  0: "Clear",
                  1: "Mainly Clear",
                  2: "Partly Cloudy",
                  3: "Overcast",
                  45: "Fog",
                  48: "Fog",
                  51: "Light Drizzle",
                  53: "Drizzle",
                  55: "Heavy Drizzle",
                  61: "Light Rain",
                  63: "Rain",
                  65: "Heavy Rain",
                  71: "Light Snow",
                  73: "Snow",
                  75: "Heavy Snow",
                  95: "Thunderstorm",
                };
                const desc = weatherDesc[code] || "Cloudy";

                // Get city name (reverse geocoding - free)
                const cityRes = await fetch(
                  `https://nominatim.openstreetmap.org/reverse?lat=${lat}&lon=${lon}&format=json`
                );
                const cityData = await cityRes.json();
                const city =
                  cityData.address.city ||
                  cityData.address.town ||
                  cityData.address.state_district ||
                  "Your Location";

                document.getElementById(
                  "weatherDisplay"
                ).innerHTML = `<i class="fas fa-map-marker-alt"></i> ${city}: ${temp}°C | ${desc}`;
              } catch (err) {
                document.getElementById(
                  "weatherDisplay"
                ).innerHTML = `<i class="fas fa-cloud-sun"></i> Weather unavailable`;
              }
            },
            () => {
              document.getElementById(
                "weatherDisplay"
              ).innerHTML = `<i class="fas fa-cloud-sun"></i> Delhi: 24°C | Haze`;
            }
          );
        } else {
          document.getElementById(
            "weatherDisplay"
          ).innerHTML = `<i class="fas fa-cloud-sun"></i> Delhi: 24°C | Haze`;
        }
      }
      getWeather();
      // Loader
      window.onload = () => {
        setTimeout(() => {
          document.getElementById("loader").style.opacity = "0";
          setTimeout(() => {
            document.getElementById("loader").style.display = "none";
          }, 600);
        }, 1500);
      };

      // Extended Politics News Data for All News Page
      const allPoliticsNews = [
        { title: "Rohini Acharya quits RJD in tears", date: "Nov 23, 2025" },
        { title: "Bihar NDA sweeps polls: Nitish CM again", date: "Nov 17, 2025" },
        { title: "PM Modi congratulates Nitish Kumar", date: "Nov 17, 2025" },
        { title: "Tej Pratap throws slipper at reporter", date: "Nov 20, 2025" },
        { title: "Lalu Yadav family feud escalates", date: "Nov 22, 2025" },
        { title: "Congress demands recount in Bihar", date: "Nov 18, 2025" },
        { title: "AAP eyes alliance with RJD", date: "Nov 21, 2025" },
        { title: "Election Commission clears air on EVMs", date: "Nov 19, 2025" },
        { title: "Nitish Kumar's ninth term: What to expect", date: "Nov 23, 2025" },
        { title: "RJD leadership crisis deepens", date: "Nov 23, 2025" },
        { title: "BJP's Bihar strategy pays off", date: "Nov 22, 2025" },
        { title: "Opposition unites against NDA", date: "Nov 21, 2025" },
        { title: "Women's reservation bill passed in Bihar", date: "Nov 20, 2025" },
        { title: "Caste census debate reignites", date: "Nov 19, 2025" },
        { title: "PM's visit to Patna highlights development", date: "Nov 18, 2025" },
        { title: "Youth vote swings Bihar elections", date: "Nov 17, 2025" },
      ];

      function createCard(title, date, index) {
        const imgSrc = `https://picsum.photos/seed/politics-${index}/400/250`;
        return `<div class="news-card">
                <img src="${imgSrc}" alt="${title}" loading="lazy">
                <div style="padding:14px">
                  <div class="date">${date}</div>
                  <h3>${title}</h3>
                  <p>Latest developments and exclusive coverage on this story. Stay tuned for more updates.</p>
                </div>
            </div>`;
      }

      // Populate All Politics Section
      const grid = document.getElementById("all-politics-news");
      let html = "";
      allPoliticsNews.forEach((news, index) => {
        html += createCard(news.title, news.date, index);
      });
      grid.innerHTML = html;
    </script>
  </body>
</html>